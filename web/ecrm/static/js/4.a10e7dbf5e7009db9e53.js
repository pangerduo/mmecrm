webpackJsonp([4],{"C/OK":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("gmQn"),r=s("TvJ3"),i=s("mvHQ"),l=s.n(i),n=s("PJh5"),o=s.n(n),u=s("mw3O"),d=s.n(u),c={data:function(){return{list:[],result:{edit:!1,name:"",remark:"",tags:[],tags_temp:[],attr:[],detail:{}}}},props:["show","type","title","id"],created:function(){this.init_attr_list(this.type)},methods:{init_attr_list:function(t){var e=this;if(null===sessionStorage.getItem("tag_list"))return a.a.request({method:"get",url:"tag",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8;"}}).then(function(t){200==t.code&&(e.list=t.data,sessionStorage.setItem("tag_list",l()(t.data)))}).catch(function(t){console.log(t)});this.list=JSON.parse(sessionStorage.getItem("tag_list"))},attr_select:function(t){var e=t.groupName;this.result.attr.indexOf(e)>-1?(delete this.result.detail[e],this.result.attr.splice(this.result.attr.indexOf(e),1),this.result.tags_temp.splice(this.result.tags_temp.indexOf(t.parentGroupName),1),this.result.tags_temp.indexOf(t.parentGroupName)<=-1&&this.result.tags.splice(this.result.tags.indexOf(t.parentGroupName),1)):(this.result.tags.indexOf(t.parentGroupName)<=-1&&this.result.tags.push(t.parentGroupName),this.result.tags_temp.push(t.parentGroupName),this.result.attr.push(e),this.$set(this.result.detail,e,t),1==t.type||4==t.type?this.$set(this.result.detail[e],"result",""):2==t.type?this.$set(this.result.detail[e],"result",[]):3==t.type?this.$set(this.result.detail[e],"result",{operation:"0",num1:1,num2:1}):5==t.type&&this.$set(this.result.detail[e],"result",{text:"",list:[]}))},attr_delete:function(t){var e=t.groupName;delete this.result.detail[e],this.result.attr.splice(this.result.attr.indexOf(e),1),this.result.tags_temp.splice(this.result.tags_temp.indexOf(t.parentGroupName),1),this.result.tags_temp.indexOf(t.parentGroupName)<=-1&&this.result.tags.splice(this.result.tags.indexOf(t.parentGroupName),1)},product_item_add:function(t){""!=this.result.detail[t].result.text&&(this.result.detail[t].result.list.push(this.result.detail[t].result.text),this.result.detail[t].result.text="")},product_item_del:function(t,e){this.result.detail[t].result.list.splice(e,1)},attr_save:function(){var t=this,e=this.$options.methods.validationInfo(this.result);if(e.state){for(var s={name:this.result.name,remark:this.result.remark,type:this.type,indexGroupList:[]},r=0;r<this.result.tags.length;r++)s.indexGroupList.push({groupName:this.result.tags[r],multipleGroupList:[],rangeGroupList:[],singleGroupList:[],textGroupList:[]});for(var i=0;i<this.result.attr.length;i++){var l=this.result.detail[this.result.attr[i]],n=this.$options.methods.getIndexByName(s,l.parentGroupName);if(1==l.type)s.indexGroupList[n].singleGroupList.push({groupName:l.groupName,value:l.result});else if(2==l.type)s.indexGroupList[n].multipleGroupList.push({groupName:l.groupName,values:l.result});else if(3==l.type){var o={};0==l.result.operation?o={gte:l.result.num1,lte:l.result.num2}:1==l.result.operation?o={gt:l.result.num1}:2==l.result.operation?o={lt:l.result.num1}:3==l.result.operation?o={gte:l.result.num1}:4==l.result.operation&&(o={lte:l.result.num1}),s.indexGroupList[n].rangeGroupList.push({groupName:l.groupName,map:o})}else 4==l.type?s.indexGroupList[n].rangeGroupList.push({groupName:l.groupName,map:{gte:l.result[0],lte:l.result[1]}}):l.type}return 0==this.id?a.a.request({method:"post",url:"people",headers:{"Content-Type":"application/json"},data:s}).then(function(e){200==e.code&&t.$message.success("数据保存成功"),t.$emit("visible",!1,!0)}).catch(function(t){console.log(t)}):(s.id=this.id,a.a.request({method:"put",url:"people",headers:{"Content-Type":"application/json"},data:s}).then(function(e){200==e.code&&t.$message.success("数据保存成功"),t.$emit("visible",!1,!0)}).catch(function(t){console.log(t)}))}this.$message.error(e.message)},dialog_close:function(){this.$emit("visible",!1,!1)},crowd_edit:function(){this.result.edit=!0},crowd_delete:function(){var t=this;this.$confirm("人群信息删除无法恢复, 是否继续?","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){return a.a.request({method:"delete",url:"people",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8;"},transformRequest:[function(t){return t=d.a.stringify(t)}],data:{ids:t.id}}).then(function(e){200==e.code&&(t.$message.success("数据删除成功"),t.$emit("visible",!1,!0))}).catch(function(t){console.log(t)})}).catch(function(){console.log("删除已取消")})},add_marketing_activity:function(){var t=this.result.name+o()(new Date).format("YYYYMMDDHHMMSS");this.$router.push({name:"marketing-activity",params:{name:t}})},getIndexByName:function(t,e){var s=-1;if(null!=t&&null!=e)for(var a=0;a<t.indexGroupList.length;a++)if(t.indexGroupList[a].groupName==e){s=a;break}return s},getDetailList:function(t,e,s){if(null!=t&&t.length>0)for(var a=0;a<t.length;a++)if(t[a].groupName==e)for(var r=0;r<t[a].childList.length;r++)if(t[a].childList[r].groupName==s)return t[a].childList[r]},validationInfo:function(t){var e={state:!0,message:""};if(""==t.name)e.state=!1,e.message="您还没有填写人群名称";else if(t.attr.length<=0)e.state=!1,e.message="当前未选择任何标签，或存在无效标签";else for(var s={},a=0;a<t.attr.length;a++)if(1==(s=t.detail[t.attr[a]]).type||4==s.type){if(""==s.result){e.state=!1,e.message=s.groupDesc+"标签不能为空";break}}else if(2==s.type){if(s.result.length<=0){e.state=!1,e.message=s.groupDesc+"标签不能为空";break}}else if(3==s.type){if(0==s.result.operation&&s.result.num1>=s.result.num2){e.state=!1,e.message=s.groupDesc+"标签数据区间不合法";break}}else if(5==s.type&&s.result.list.length<=0){e.state=!1,e.message=s.groupDesc+"标签不能为空";break}return e}},watch:{show:{handler:function(t){!0===t&&(this.result.name="",this.result.remark="",this.result.tags=[],this.result.tags_temp=[],this.result.attr=[],this.result.detail={})}},type:{handler:function(t){this.init_attr_list(t)}},id:{handler:function(t){var e=this;if(t>0)return this.result.edit=!1,a.a.request({method:"get",url:"people/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8;"}}).then(function(t){if(200==t.code){e.result.name=t.data.name,e.result.remark=t.data.remark;var s=JSON.parse(t.data.tagListJson);if(s.length>0)for(var a=0;a<s.length;a++){if(s[a].multipleGroupList.length>0)for(var r=0;r<s[a].multipleGroupList.length;r++){e.result.tags_temp.push(s[a].groupName),e.result.tags.indexOf(s[a].groupName)<=-1&&e.result.tags.push(s[a].groupName);var i=s[a].multipleGroupList[r].groupName,l=s[a].multipleGroupList[r].values;e.result.attr.push(i),e.result.detail[i]=e.$options.methods.getDetailList(e.list,s[a].groupName,i),e.$set(e.result.detail[i],"result",l)}if(s[a].rangeGroupList.length>0)for(var n=0;n<s[a].rangeGroupList.length;n++){e.result.tags_temp.push(s[a].groupName),e.result.tags.indexOf(s[a].groupName)<=-1&&e.result.tags.push(s[a].groupName);var o=s[a].rangeGroupList[n].groupName,u=s[a].rangeGroupList[n].map;if(e.result.attr.push(o),e.result.detail[o]=e.$options.methods.getDetailList(e.list,s[a].groupName,o),4==e.result.detail[o].type){var d=[];d.push(u.gte,u.lte),e.$set(e.result.detail[o],"result",d)}else if(3==e.result.detail[o].type){var c={operation:"0",num1:1,num2:1};void 0!=u.gte&&void 0!=u.lte?(c.operation="0",c.num1=u.gte,c.num2=u.lte):void 0!=u.gt?(c.operation="1",c.num1=u.gt):void 0!=u.lt?(c.operation="2",c.num1=u.lt):void 0!=u.gte?(c.operation="3",c.num1=u.gte):void 0!=u.lte&&(c.operation="4",c.num1=u.lte),e.$set(e.result.detail[o],"result",c)}}if(s[a].singleGroupList.length>0)for(var p=0;p<s[a].singleGroupList.length;p++){e.result.tags_temp.push(s[a].groupName),e.result.tags.indexOf(s[a].groupName)<=-1&&e.result.tags.push(s[a].groupName);var m=s[a].singleGroupList[p].groupName,v=s[a].singleGroupList[p].value;e.result.attr.push(m),e.result.detail[m]=e.$options.methods.getDetailList(e.list,s[a].groupName,m),e.$set(e.result.detail[m],"result",v)}if(s[a].textGroupList.length>0)for(var h=0;h<s[a].textGroupList.length;h++){e.result.tags_temp.push(s[a].groupName),e.result.tags.indexOf(s[a].groupName)<=-1&&e.result.tags.push(s[a].groupName);var g=s[a].textGroupList[h].groupName;e.result.attr.push(g),e.result.detail[g]=e.$options.methods.getDetailList(e.list,s[a].groupName,g),e.$set(e.result.detail[g],"result",{text:"",list:[]})}}}}).catch(function(t){console.log(t)});this.result.edit=!0}}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog-box",attrs:{title:t.title,visible:t.show,"close-on-click-modal":!1},on:{close:t.dialog_close}},[a("div",{staticClass:"edit-content"},[a("div",{staticClass:"edit-left"},[a("div",{staticClass:"label-box"},[a("h6",[t._v("选择下面的标签组成人群")]),t._v(" "),a("div",{staticClass:"label-list"},[a("happy-scroll",{attrs:{color:"rgba(0,0,0,0.3)",size:"3"}},[a("div",{staticClass:"list-items"},t._l(t.list,function(e){return a("div",{staticClass:"list-item"},[a("span",[a("i"),t._v(t._s(e.groupDesc))]),t._v(" "),a("ul",[t._l(e.childList,function(e){return[t.result.edit?a("li",{class:t.result.attr.indexOf(e.groupName)>-1?"selected":"",attrs:{title:e.groupDesc},on:{click:function(s){return t.attr_select(e)}}},[t._v(t._s(e.groupDesc))]):a("li",{class:t.result.attr.indexOf(e.groupName)>-1?"selected":"",staticStyle:{cursor:"no-drop"},attrs:{title:e.groupDesc}},[t._v(t._s(e.groupDesc))])]})],2)])}),0)])],1)])]),t._v(" "),a("div",{staticClass:"edit-right"},[a("div",{staticClass:"label-details"},[a("div",{staticClass:"details-title"},[a("h6",[t._v("选择下面的逻辑进行人群运算")]),t._v(" "),a("div",{staticClass:"details-remark"},[t._v("已选标签："+t._s(t.result.attr.length))])]),t._v(" "),a("div",{staticClass:"details-list"},[0===t.result.attr.length?a("div",{staticClass:"list-empty"},[a("img",{attrs:{src:s("rJjp")}})]):a("happy-scroll",{attrs:{color:"rgba(0,0,0,0.3)",size:"3"}},[a("ul",t._l(t.result.detail,function(e,s){return a("li",{staticClass:"attr-item"},[a("div",{staticClass:"item-title"},[t._v(t._s(e.groupDesc)),t.result.edit?a("span",{on:{click:function(s){return t.attr_delete(e)}}},[t._v("删除")]):a("span",{staticStyle:{cursor:"no-drop"}},[t._v("删除")])]),t._v(" "),a("div",{staticClass:"item-form"},[1==e.type?a("div",{staticClass:"form-radio"},t._l(e.childList,function(s){return a("label",{staticClass:"btn-radio"},[t.result.edit?a("input",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],attrs:{type:"radio",name:s.groupName},domProps:{value:s.groupName,checked:t._q(e.result,s.groupName)},on:{change:function(a){return t.$set(e,"result",s.groupName)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],attrs:{type:"radio",name:s.groupName,disabled:""},domProps:{value:s.groupName,checked:t._q(e.result,s.groupName)},on:{change:function(a){return t.$set(e,"result",s.groupName)}}}),t._v("\n                      "+t._s(s.groupDesc)+"\n                    ")])}),0):2==e.type?a("div",{staticClass:"form-group"},t._l(e.childList,function(s){return a("label",{staticClass:"btn-group"},[t.result.edit?a("input",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],attrs:{type:"checkbox"},domProps:{value:s.groupName,checked:Array.isArray(e.result)?t._i(e.result,s.groupName)>-1:e.result},on:{change:function(a){var r=e.result,i=a.target,l=!!i.checked;if(Array.isArray(r)){var n=s.groupName,o=t._i(r,n);i.checked?o<0&&t.$set(e,"result",r.concat([n])):o>-1&&t.$set(e,"result",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(e,"result",l)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"item.result"}],attrs:{type:"checkbox",disabled:""},domProps:{value:s.groupName,checked:Array.isArray(e.result)?t._i(e.result,s.groupName)>-1:e.result},on:{change:function(a){var r=e.result,i=a.target,l=!!i.checked;if(Array.isArray(r)){var n=s.groupName,o=t._i(r,n);i.checked?o<0&&t.$set(e,"result",r.concat([n])):o>-1&&t.$set(e,"result",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(e,"result",l)}}}),t._v("\n                      "+t._s(s.groupDesc)+"\n                    ")])}),0):3==e.type?a("div",{staticClass:"form-range-num"},[t.result.edit?[a("select",{directives:[{name:"model",rawName:"v-model",value:e.result.operation,expression:"item.result.operation"}],on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e.result,"operation",s.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[t._v("区间")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("大于")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("大于等于")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("小于")]),t._v(" "),a("option",{attrs:{value:"4"}},[t._v("小于等于")])]),t._v(" "),a("el-input-number",{attrs:{size:"small","controls-position":"right",min:1,max:10},model:{value:e.result.num1,callback:function(s){t.$set(e.result,"num1",t._n(s))},expression:"item.result.num1"}}),t._v(" "),"0"==e.result.operation?[t._v("\n                        - "),a("el-input-number",{attrs:{size:"small","controls-position":"right",min:1,max:10},model:{value:e.result.num2,callback:function(s){t.$set(e.result,"num2",t._n(s))},expression:"item.result.num2"}})]:t._e()]:[a("select",{directives:[{name:"model",rawName:"v-model",value:e.result.operation,expression:"item.result.operation"}],attrs:{disabled:""},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e.result,"operation",s.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[t._v("区间")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("大于")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("大于等于")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("小于")]),t._v(" "),a("option",{attrs:{value:"4"}},[t._v("小于等于")])]),t._v(" "),a("el-input-number",{attrs:{size:"small","controls-position":"right",min:1,max:10,disabled:""},model:{value:e.result.num1,callback:function(s){t.$set(e.result,"num1",t._n(s))},expression:"item.result.num1"}}),t._v(" "),"0"==e.result.operation?[t._v("\n                        - "),a("el-input-number",{attrs:{size:"small","controls-position":"right",min:1,max:10,disabled:""},model:{value:e.result.num2,callback:function(s){t.$set(e.result,"num2",t._n(s))},expression:"item.result.num2"}})]:t._e()]],2):4==e.type?a("div",{staticClass:"form-range"},[t.result.edit?a("el-date-picker",{attrs:{type:"daterange",size:"small","range-separator":"-","start-placeholder":"起始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd"},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}}):a("el-date-picker",{attrs:{type:"daterange",size:"small","range-separator":"-","start-placeholder":"起始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd",disabled:""},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"item.result"}})],1):5==e.type?a("div",{staticClass:"form-product"},[a("div",{staticClass:"input"},[t.result.edit?[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.result.text,expression:"item.result.text",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:""},domProps:{value:e.result.text},on:{input:function(s){s.target.composing||t.$set(e.result,"text",s.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("button",{attrs:{type:"button"},on:{click:function(s){return t.product_item_add(e.groupName)}}},[t._v("+")])]:[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.result.text,expression:"item.result.text",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"",disabled:""},domProps:{value:e.result.text},on:{input:function(s){s.target.composing||t.$set(e.result,"text",s.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("button",{staticStyle:{cursor:"no-drop"},attrs:{type:"button"}},[t._v("+")])]],2),t._v(" "),a("ul",{staticClass:"list"},t._l(e.result.list,function(s,r){return a("li",[t._v(t._s(s)+"\n                        "),t.result.edit?[a("span",{on:{click:function(s){return t.product_item_del(e.groupName,r)}}},[t._v("X")])]:[a("span",{staticStyle:{cursor:"no-drop"}},[t._v("X")])]],2)}),0)]):t._e()])])}),0)])],1),t._v(" "),a("div",{staticClass:"details-edit"},[a("div",{staticClass:"edit-form"},[a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-item-title"},[a("i",[t._v("*")]),t._v("人群名称")]),t._v(" "),a("span",{staticClass:"form-item-input"},[t.result.edit?a("el-input",{attrs:{type:"text",size:"mini",maxlength:"20","show-word-limit":"",placeholder:"必填"},model:{value:t.result.name,callback:function(e){t.$set(t.result,"name",e)},expression:"result.name"}}):a("el-input",{attrs:{type:"text",size:"mini",maxlength:"20","show-word-limit":"",placeholder:"必填",disabled:""},model:{value:t.result.name,callback:function(e){t.$set(t.result,"name",e)},expression:"result.name"}})],1)]),t._v(" "),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-item-title"},[t._v("备注")]),t._v(" "),a("span",{staticClass:"form-item-input"},[t.result.edit?a("el-input",{attrs:{type:"textarea",size:"mini",maxlength:"100","show-word-limit":"",placeholder:"非必填"},model:{value:t.result.remark,callback:function(e){t.$set(t.result,"remark",e)},expression:"result.remark"}}):a("el-input",{attrs:{type:"textarea",size:"mini",maxlength:"100","show-word-limit":"",placeholder:"非必填",disabled:""},model:{value:t.result.remark,callback:function(e){t.$set(t.result,"remark",e)},expression:"result.remark"}})],1)])]),t._v(" "),a("div",{staticClass:"edit-btn"},[t.result.edit?[a("button",{staticClass:"btn-submit",attrs:{type:"button"},on:{click:t.attr_save}},[t._v("保存")]),t._v(" "),a("button",{staticClass:"btn-cancel",attrs:{type:"button"},on:{click:t.dialog_close}},[t._v("取消")])]:[a("button",{staticClass:"btn-activity",attrs:{type:"button"},on:{click:t.add_marketing_activity}},[t._v("新建营销活动")]),t._v(" "),a("button",{staticClass:"btn-edit",attrs:{type:"button"},on:{click:t.crowd_edit}},[t._v("编辑人群")]),t._v(" "),a("button",{staticClass:"btn-delete",attrs:{type:"button"},on:{click:t.crowd_delete}},[t._v("删除人群")])]],2)])])])])])},staticRenderFns:[]};var m=s("VU/8")(c,p,!1,function(t){s("y7Yg"),s("irPk")},"data-v-7dc48f1a",null).exports,v={data:function(){return{search:{name:"",type:"",page:1,size:10},data:{list:[],totalPage:0,totalCount:0,del:{datas:[],state:!1}},crowd_id:-1,crowd_type:2,crowd_title:"",crowd_dialog:!1}},created:function(){this.search_list()},methods:{search_list:function(){this.search.page=1,this.search_data()},change_data:function(t,e){this.search.page=t,this.search.size=e,this.search_data()},search_data:function(){var t=this;return a.a.request({methods:"get",url:"people",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8;"},params:{name:this.search.name,type:this.search.type,page:this.search.page-1,size:this.search.size}}).then(function(e){t.data.list=e.data.list,t.data.totalPage=e.data.totalPage,t.data.totalCount=e.data.totalCount;for(var s=0;s<t.data.list.length;s++)t.data.list[s].createTime=o()(t.data.list[s].createTime).format("YYYY-MM-DD"),1===e.data.list[s].type?e.data.list[s].typeName="公域":e.data.list[s].typeName="私域"}).catch(function(t){console.log(t)})},add_crowd:function(t){this.crowd_id=0,this.crowd_type=t,this.crowd_dialog=!0,this.crowd_title=1==t?"新建公域人群":"新建私域人群"},edit_crowd:function(t,e){this.crowd_id=t,this.crowd_type=e,this.crowd_dialog=!0,this.crowd_title="查看管理"},close_dialog:function(t,e){e&&this.search_list(),this.crowd_dialog=t,this.crowd_id=-1},add_marketing_activity:function(t){t+=o()(new Date).format("YYYYMMDDHHMMSS"),this.$router.push({name:"marketing-activity",params:{name:t}})},delete_batch:function(){this.data.del.state=!0,this.data.del.datas=[]},delete_submit:function(){var t=this;return a.a.request({method:"delete",url:"people",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8;"},transformRequest:[function(t){return t=d.a.stringify(t)}],data:{ids:this.data.del.datas.toString()}}).then(function(e){200==e.code&&(t.$message.success("数据删除成功"),t.data.del.state=!1,t.search_list())}).catch(function(t){console.log(t)})},delete_cancel:function(){this.data.del.state=!1,this.data.del.datas=[]},checked_all:function(t){if(t.target.checked){this.data.del.datas=[];for(var e=0;e<this.data.list.length;e++)this.data.del.datas.push(this.data.list[e].id)}else this.data.del.datas=[]}},components:{"table-pager":r.a,"crowd-model":m}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main crowd-list"},[s("div",{staticClass:"main-search"},[s("div",{staticClass:"search-title"},[s("h5",[t._v("全部人群")]),t._v(" "),s("div",{staticClass:"btn-list"},[t.data.del.state?[s("a",{staticClass:"btn-complete",attrs:{href:"javascript:void(0)"},on:{click:t.delete_cancel}},[t._v("完成")]),t._v("  \n          "),t.data.del.datas.length>0?s("a",{staticClass:"btn-delete-submit",attrs:{href:"javascript:void(0)"},on:{click:t.delete_submit}},[t._v("删除")]):s("a",{staticClass:"btn-delete-disabled",attrs:{href:"javascript:void(0)",disabled:""}},[t._v("删除")])]:[s("a",{staticClass:"btn-delete",attrs:{href:"javascript:void(0)"},on:{click:t.delete_batch}},[t._v("批量删除")]),t._v("  \n          "),s("a",{staticClass:"btn-add-private",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.add_crowd(2)}}},[t._v("新建私域人群")]),t._v("  \n          "),s("a",{staticClass:"btn-add-public",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.add_crowd(1)}}},[t._v("新建公域人群")])]],2)]),t._v(" "),s("div",{staticClass:"search-form"},[s("div",{staticClass:"search-item"},[s("span",{staticClass:"item-left"},[t._v("人群名称")]),t._v(" "),s("span",{staticClass:"item-right"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.search.name,expression:"search.name",modifiers:{trim:!0}}],staticClass:"txt-common",attrs:{type:"text",placeholder:"输入人群名称"},domProps:{value:t.search.name},on:{input:function(e){e.target.composing||t.$set(t.search,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),s("div",{staticClass:"search-item"},[s("span",{staticClass:"item-left"},[t._v("类型")]),t._v(" "),s("span",{staticClass:"item-right"},[s("select",{directives:[{name:"model",rawName:"v-model.number",value:t.search.type,expression:"search.type",modifiers:{number:!0}}],staticClass:"txt-common",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var s="_value"in e?e._value:e.value;return t._n(s)});t.$set(t.search,"type",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("不限")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("公域人群")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("私域人群")])])])]),t._v(" "),s("button",{staticClass:"btn-search",attrs:{type:"button"},on:{click:t.search_list}},[t._v("查询")])])]),t._v(" "),s("div",{staticClass:"main-table"},[s("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0"}},[s("thead",[s("tr",[s("td",{attrs:{width:"15%"}},[t.data.del.state?[s("input",{staticClass:"chk-box",attrs:{type:"checkbox"},domProps:{checked:t.data.del.datas.length>=t.data.list.length},on:{click:t.checked_all}})]:t._e(),t._v("\n          人群名称\n        ")],2),t._v(" "),s("td",{attrs:{width:"20%"}},[t._v("备注")]),t._v(" "),s("td",{attrs:{width:"15%"}},[t._v("创建时间")]),t._v(" "),s("td",{attrs:{width:"8%"}},[t._v("类型")]),t._v(" "),s("td",{attrs:{width:"10%"}},[t._v("总人数")]),t._v(" "),s("td",{attrs:{width:"12%"}},[t._v("可短信营销人数")]),t._v(" "),s("td",{attrs:{width:"20%"}},[t._v("操作")])])]),t._v(" "),s("tbody",[t._l(t.data.list,function(e,a){return s("tr",{key:a},[s("td",[s("input",{directives:[{name:"show",rawName:"v-show",value:t.data.del.state,expression:"data.del.state"},{name:"model",rawName:"v-model",value:t.data.del.datas,expression:"data.del.datas"}],staticClass:"chk-box",attrs:{type:"checkbox"},domProps:{value:e.id,checked:t.data.del.datas.indexOf(e.id)>=-1,checked:Array.isArray(t.data.del.datas)?t._i(t.data.del.datas,e.id)>-1:t.data.del.datas},on:{change:function(s){var a=t.data.del.datas,r=s.target,i=!!r.checked;if(Array.isArray(a)){var l=e.id,n=t._i(a,l);r.checked?n<0&&t.$set(t.data.del,"datas",a.concat([l])):n>-1&&t.$set(t.data.del,"datas",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.data.del,"datas",i)}}}),t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.remark))]),t._v(" "),s("td",[t._v(t._s(e.createTime))]),t._v(" "),s("td",[t._v(t._s(e.typeName))]),t._v(" "),s("td",[t._v(t._s(null==e.totalCount?"等待更新":e.totalCount))]),t._v(" "),s("td",[t._v(t._s(null==e.canSendSmsCount?"等待更新":e.canSendSmsCount))]),t._v(" "),s("td",[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.add_marketing_activity(e.name)}}},[t._v("新建营销活动")]),t._v(" "),s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.edit_crowd(e.id,e.type)}}},[t._v("查看管理")])])])}),t._v(" "),t.data.totalCount<=0?s("tr",[s("td",{staticClass:"table-empty",staticStyle:{"text-align":"center !important"},attrs:{colspan:"7"}},[t._v("没有符合条件的数据")])]):t._e()],2)]),t._v(" "),s("table-pager",{attrs:{show_size:"true",cur:t.search.page,total_page:t.data.totalPage,total_count:t.data.totalCount},on:{change:t.change_data}})],1),t._v(" "),s("crowd-model",{attrs:{title:t.crowd_title,type:t.crowd_type,id:t.crowd_id,show:t.crowd_dialog},on:{"update:show":function(e){t.crowd_dialog=e},visible:t.close_dialog}})],1)},staticRenderFns:[]};var g=s("VU/8")(v,h,!1,function(t){s("CHvk")},"data-v-1a0012dc",null);e.default=g.exports},CHvk:function(t,e){},irPk:function(t,e){},mvHQ:function(t,e,s){t.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(t,e,s){var a=s("FeBl"),r=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},rJjp:function(t,e,s){t.exports=s.p+"static/img/crowd-bg.1bad7b1.png"},y7Yg:function(t,e){}});