webpackJsonp([10],{"/Qdy":function(t,e){},"1sSl":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("gmQn"),s={data:function(){return{activeName:"calendar-list",marketing:{dialogEditVisible:!1,editText:"",editId:"",dialogFormVisible:!1,name:"",radio:0},search:{name:"",show:!1}}},created:function(){this.init_pages()},methods:{init_pages:function(){var t=this.$route.path.split("/"),e=t[t.length-1];this.search.show="calendar-list"!=e,this.search.name="",this.activeName=e},tab_select:function(t){"calendar-list"==t.name?this.search.show=!1:this.search.show=!0,this.search.name="",this.$router.push({name:t.name})},addMarketing:function(){this.marketing.name="",this.marketing.dialogFormVisible=!0},saveMarketing:function(){""==this.marketing.name?this.$message.error("请输活动名称"):this.$router.push({name:"marketing-activity",params:{name:this.marketing.name}})},editMarketing:function(t){this.marketing.editId=t.id,this.marketing.editText=t.name,this.marketing.dialogEditVisible=!0},editSave:function(){var t=this;if(""!=this.marketing.editText)return i.a.request({method:"put",url:"activity",headers:{"Content-Type":"application/json"},data:{id:this.marketing.editId,name:this.marketing.editText}}).then(function(e){200==e.code&&(t.$message.success("修改成功"),t.marketing.dialogEditVisible=!1,t.$refs.mychild.get_list())}).catch(function(e){t.$message.error("修改失败")});this.$message.error("请输入活动名称")},deleteMarketing:function(t){var e=this;this.$confirm("删除后不可恢复，确定删除该活动吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return i.a.request({method:"delete",url:"activity/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8;"}}).then(function(t){200==t.code&&(e.$message.success("删除成功!"),e.$refs.mychild.get_list())}).catch(function(t){e.$message.error("删除失败!")})}).catch(function(){})},search_list:function(){this.$refs.mychild.search.page=1,this.$refs.mychild.get_list()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main calendar"},[a("div",{staticClass:"main-table"},[a("div",{staticClass:"main-header"},[a("el-tabs",{on:{"tab-click":t.tab_select},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"营销日历",name:"calendar-list"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"执行中的活动",name:"executing-list"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已提交的活动",name:"committed-list"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"设计中的活动",name:"designing-list"}})],1),t._v(" "),a("div",{staticClass:"main-right"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.search.show,expression:"search.show"}],staticClass:"input-box"},[a("i",{staticClass:"search-icon",on:{click:t.search_list}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.name,expression:"search.name"}],staticClass:"txt-common",attrs:{type:"text",placeholder:"请输入活动名称"},domProps:{value:t.search.name},on:{input:function(e){e.target.composing||t.$set(t.search,"name",e.target.value)}}})]),t._v(" "),a("button",{staticClass:"btn-small",attrs:{type:"button"},on:{click:t.addMarketing}},[t._v("+新建营销活动")])])],1),t._v(" "),a("div",{staticClass:"main-data"},[t.search.show?a("router-view",{ref:"mychild",attrs:{names:t.search.name}}):a("router-view")],1)]),t._v(" "),a("el-dialog",{attrs:{title:"新建营销活动",visible:t.marketing.dialogFormVisible},on:{"update:visible":function(e){return t.$set(t.marketing,"dialogFormVisible",e)}}},[a("el-form",[a("el-form-item",{attrs:{label:"活动名称:"}},[a("el-input",{attrs:{type:"text",maxlength:"30","show-word-limit":""},model:{value:t.marketing.name,callback:function(e){t.$set(t.marketing,"name",e)},expression:"marketing.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新建方式:"}},[a("el-radio-group",{model:{value:t.marketing.radio,callback:function(e){t.$set(t.marketing,"radio",e)},expression:"marketing.radio"}},[a("el-radio",{attrs:{label:0}},[t._v("新建空白活动")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.marketing.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveMarketing}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改营销活动名称",visible:t.marketing.dialogEditVisible},on:{"update:visible":function(e){return t.$set(t.marketing,"dialogEditVisible",e)}}},[a("el-form",[a("el-form-item",{attrs:{label:"活动名称:"}},[a("el-input",{attrs:{type:"text",maxlength:"30","show-word-limit":""},model:{value:t.marketing.editText,callback:function(e){t.$set(t.marketing,"editText",e)},expression:"marketing.editText"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.marketing.dialogEditVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editSave}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,n,!1,function(t){a("/Qdy"),a("It3z")},"data-v-b4ae8b90",null);e.default=r.exports},It3z:function(t,e){}});